<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Flujo Creativo · Notion Grid</title>

    <!-- Tipografías -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Oswald:wght@300;400;600&display=swap" rel="stylesheet" />

    <style>
      :root{
        --beige:#D9D9D9;            /* fondo */
        --tile:#ECEBE8;             /* “cuadritos” y botones claros */
        --black:#000000;
        --white:#ffffff;
      }
      *{box-sizing:border-box}
      html,body{height:100%}
      body{
        margin:0;
        font-family:"Inter",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
        color:var(--black);
        background:var(--beige);
        -webkit-font-smoothing:antialiased;
        text-rendering:optimizeLegibility;
      }

      /* Layout minimal 90s/editorial */
      .wrap{
        max-width:960px;
        margin:0 auto;
        padding:48px 20px 80px;
      }
      header{
        display:flex;align-items:center;justify-content:space-between;
        margin-bottom:32px;
      }
      .brand{
        font-family:"Oswald",sans-serif;
        letter-spacing:.5px;
        font-size:22px;
        text-transform:uppercase;
      }

      .card{
        background:linear-gradient(180deg, rgba(255,255,255,.35), rgba(255,255,255,.15));
        border:1px solid rgba(0,0,0,.12);
        padding:40px 28px;
      }

      h1{
        font-family:"Oswald",sans-serif;
        font-weight:600;
        font-size:42px;
        line-height:1.05;
        margin:0 0 8px;
        text-align:center;
        text-transform:none;
      }
      .sub{
        max-width:720px;margin:0 auto 28px;
        text-align:center;font-size:16px;line-height:1.55;
      }

      /* Caja del enlace */
      .url-box{
        background:var(--tile);
        border:1px solid rgba(0,0,0,.18);
        padding:18px;
        font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
        font-size:15px;
        overflow:auto;
        white-space:nowrap;
      }

      /* Botones cuadrados */
      .actions{display:flex;gap:10px;justify-content:center;margin-top:18px;flex-wrap:wrap}
      .btn{
        border:1px solid rgba(0,0,0,.85);
        background:var(--tile);
        color:var(--black);
        padding:12px 16px;
        font-size:14px;
        letter-spacing:.2px;
        text-decoration:none;
        cursor:pointer;
        border-radius:0; /* cuadrado */
        min-width:150px;
        text-align:center;
      }
      .btn:focus{outline:2px dashed var(--black);outline-offset:2px}
      .btn-primary{
        background:var(--black);
        color:var(--white);
      }

      /* Footer mini editorial */
      footer{
        display:flex;justify-content:space-between;align-items:center;
        gap:12px;margin-top:22px;font-size:12px;opacity:.8;
      }
      .help-link{color:var(--black);text-decoration:underline;cursor:pointer}

      /* Globo de ayuda */
      .help{
        position:fixed;right:22px;bottom:22px;width:min(560px,92vw);
        background:var(--tile);
        border:1px solid rgba(0,0,0,.2);
        box-shadow:0 10px 30px rgba(0,0,0,.18);
        transform:translateY(12px);opacity:0;pointer-events:none;
        transition:.2s ease;
      }
      .help.open{transform:translateY(0);opacity:1;pointer-events:auto}
      .help header{
        padding:12px 14px;border-bottom:1px solid rgba(0,0,0,.12);
        display:flex;align-items:center;gap:10px;justify-content:space-between
      }
      .help header .title{font-weight:600}
      .help .close{
        background:none;border:0;color:var(--black);font-size:18px;cursor:pointer
      }
      .help .body{padding:14px 16px;max-height:min(70vh,620px);overflow:auto}
      .faq h3{font-size:15px;margin:14px 0 6px;font-weight:700}
      .faq p{margin:0 0 10px;font-size:14px;line-height:1.5}
      .kbd{font-family:ui-monospace,monospace;background:#f4f4f4;border:1px solid #ddd;padding:1px 4px}

      /* Alerta de “copiado” */
      .toast{
        position:fixed;left:50%;bottom:28px;transform:translateX(-50%);
        background:var(--black);color:var(--white);padding:10px 14px;
        font-size:13px;opacity:0;border-radius:0;transition:.2s ease;
      }
      .toast.show{opacity:1}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">Flujo Creativo</div>
        <!-- sin botón “Inicio” (esta es la principal) -->
      </header>

      <section class="card">
        <h1>Aquí puedes encontrar tu enlace de configuración</h1>
        <p class="sub">
          Guarda este URL único en un lugar seguro — lo usarás cada vez que crees un widget.
          Piénsalo como tu acceso personal al Setup.
        </p>

        <div id="url" class="url-box" tabindex="0" aria-label="Enlace de configuración">
          <!-- se inyecta por JS -->
        </div>

        <div class="actions">
          <button id="copy" class="btn" type="button">Copiar URL</button>
          <a id="go" class="btn btn-primary" href="#" rel="nofollow">Comenzar el Setup →</a>
        </div>

        <footer>
          <div>© 2025 Flujo Creativo · Sistema Notion Grid</div>
          <div class="help-link" id="ask">¿Necesitas ayuda?</div>
        </footer>
      </section>
    </div>

    <!-- Globo/ayuda -->
    <aside id="help" class="help" role="dialog" aria-modal="true" aria-labelledby="help-title">
      <header>
        <div id="help-title" class="title">Ayuda rápida</div>
        <button class="close" id="closeHelp" type="button">← cerrar</button>
      </header>
      <div class="body">
        <div class="faq">
          <h3>¿Dónde encuentro mi enlace de configuración?</h3>
          <p>
            Tras la compra en Shopify recibirás un correo de confirmación de <strong>Flujo Creativo</strong> con tu
            <em>Setup URL</em>. Si no lo ves, revisa spam/promociones y busca por “Flujo Creativo”.
          </p>

          <h3>Perdí mi enlace. ¿Qué hago?</h3>
          <p>
            Abre de nuevo el correo de confirmación de tu pedido y utiliza el botón de acceso.
            Si aún no lo encuentras, escríbenos a
            <a href="mailto:emiliagrijalvao@gmail.com">emiliagrijalvao@gmail.com</a> y te lo reenviaremos.
          </p>

          <h3>Me dice “email no registrado”.</h3>
          <p>
            Asegúrate de usar exactamente el mismo correo con el que hiciste la compra en Shopify.
            Si cambiaste de correo, contáctanos para actualizarlo.
          </p>

          <h3>¿Cómo obtengo soporte?</h3>
          <p>
            Mándanos un email a <a href="mailto:emiliagrijalvao@gmail.com">emiliagrijalvao@gmail.com</a>.
            Respondemos en días hábiles.
          </p>
        </div>
      </div>
    </aside>

    <div id="toast" class="toast" role="status" aria-live="polite">Copiado</div>

    <script>
      // 1) Resolver el Setup URL (query ?setup=... o localStorage)
      (function(){
        const q = new URLSearchParams(location.search);
        const setupFromQuery = q.get("setup");
        const stored = localStorage.getItem("setupUrl");
        const fallback = "https://tu-dominio.com/widgets/xxxxx/setup?token=XXXX";
        const setupUrl = setupFromQuery || stored || fallback;

        // Guardamos si vino por query
        if (setupFromQuery) localStorage.setItem("setupUrl", setupFromQuery);

        const urlBox = document.getElementById("url");
        const go = document.getElementById("go");
        urlBox.textContent = setupUrl;
        go.href = setupUrl;

        // 2) Copiar
        document.getElementById("copy").addEventListener("click", async () => {
          try{
            await navigator.clipboard.writeText(setupUrl);
            toast("Copiado");
          }catch{
            // Fallback selección manual
            const r = document.createRange();
            r.selectNodeContents(urlBox);
            const sel = window.getSelection();
            sel.removeAllRanges(); sel.addRange(r);
            toast("Seleccionado: ⌘/Ctrl+C");
          }
        });

        // 3) Ayuda (globo)
        const help = document.getElementById("help");
        document.getElementById("ask").addEventListener("click", () => help.classList.add("open"));
        document.getElementById("closeHelp").addEventListener("click", () => help.classList.remove("open"));

        // 4) Toast
        window.toast = (msg) => {
          const t = document.getElementById("toast");
          t.textContent = msg;
          t.classList.add("show");
          setTimeout(()=>t.classList.remove("show"), 1400);
        };
      })();
    </script>
  </body>
</html>
